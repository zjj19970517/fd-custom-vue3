{
  "version": 3,
  "sources": ["../src/reactive.ts", "../src/handler/collectionHandler.ts", "../src/handler/commonHandler.ts", "../src/effect.ts", "../src/dep.ts", "../src/types/operation.ts", "../src/types/common.ts", "../src/utils/index.ts", "../src/ref.ts", "../src/computed.ts"],
  "sourcesContent": ["import { isObject } from '@meils/vue-shared';\n\nimport {\n  collectionHandler,\n  readonlyCollectionHandler,\n  shallowCollectionHandler\n} from './handler/collectionHandler';\nimport {\n  commonHandler,\n  readonlyCommonHandler,\n  shallowCommonHandler\n} from './handler/commonHandler';\nimport { ReactiveFlags, Target, TargetType } from './types/common';\nimport { getTargetType } from './utils';\n\nexport const reactiveCacheMap = new WeakMap<Target, any>(); // reactive \u54CD\u5E94\u7F13\u5B58\u96C6\nexport const readonlyCacheMap = new WeakMap<Target, any>(); // readonly \u7F13\u5B58\u96C6\nexport const shallowReactiveCacheMap = new WeakMap<Target, any>();\nexport const shallowReadonlyCacheMap = new WeakMap<Target, any>();\nexport const shallowCacheMap = new WeakMap<Target, any>();\n\n/**\n * \u54CD\u5E94\u5F0F\u5904\u7406\n * @param target\n * @returns\n */\nexport function reactive(target: object) {\n  /**\n    reactive \u63A5\u53D7\u4E00\u4E2A readonly \u4EE3\u7406\u5BF9\u8C61\u65F6\uFF0C\u76F4\u63A5\u8FD4\u56DE\n    const proxy1 = readonly({});\n    const proxy2 = reactive(proxy1);\n    console.log(proxy1 === proxy2); // true\n   */\n  if (isReadonly(target)) {\n    return target;\n  }\n\n  return createReactiveObject(\n    target, // arr\u3001obj\u3001map\u3001set \u8FD9\u51E0\u79CD\u7C7B\u578B\n    false /* isReadonly */,\n    commonHandler, // arr\u3001obj \u9002\u7528\u4E8E\u8FD9\u4E2A\n    collectionHandler, // map\u3001set \u9002\u7528\u4E8E\u8FD9\u4E2A\n    reactiveCacheMap\n  );\n}\n\n/**\n * \u521B\u5EFA\u53EA\u8BFB\n * @param target\n * @returns\n */\nexport function readonly(target: object) {\n  return createReactiveObject(\n    target,\n    true /* isReadonly */,\n    readonlyCommonHandler,\n    readonlyCollectionHandler,\n    readonlyCacheMap\n  );\n}\n\n/**\n * \u6D45\u54CD\u5E94\u5F0F\u5BF9\u8C61\n * @param target\n * @returns\n */\nexport function shallowReactive<T extends object>(target: T) {\n  return createReactiveObject(\n    target,\n    false /* isReadonly */,\n    shallowCommonHandler,\n    shallowCollectionHandler,\n    shallowCacheMap\n  );\n}\n\n/**\n * \u6821\u9A8C\u662F\u5426\u4E3A\u53EA\u8BFB\u5BF9\u8C61\uFF08\u4E5F\u5C31\u662F\u5224\u65AD\u662F\u5426\u4E3A readonly() \u5904\u7406\u540E\u7684\u5BF9\u8C61\uFF09\n * @param value\n * @returns\n */\nexport function isReadonly(value: unknown): boolean {\n  return !!(value && (value as Target)[ReactiveFlags.IS_READONLY]);\n}\n\n/**\n * \u5224\u65AD\u662F\u5426\u5DF2\u7ECF\u4EE3\u7406\u8FC7\n * @param value\n * @returns\n */\nexport function isProxy(value: unknown) {\n  return isReactive(value) || isReadonly(value);\n}\n\n/**\n * \u5224\u65AD\u662F\u5426\u5DF2\u7ECF reactive \u5904\u7406\u8FC7\u4E86\uFF0C\u662F\u54CD\u5E94\u5F0F\u7684\n * @param value\n * @returns\n */\nexport function isReactive(value: unknown) {\n  return !!(value && (value as Target)[ReactiveFlags.IS_REACTIVE]);\n}\n\n/**\n * \u5904\u7406\u4E00\u4E2A\u54CD\u5E94\u5F0F\u4EE3\u7406\u5BF9\u8C61\uFF0C\u8FD4\u56DE\u5176\u672A\u88AB\u4EE3\u7406\u524D\u7684\u5BF9\u8C61 target\n * @param observed\n * @returns\n */\nexport function toRaw(observed: any): any {\n  // (observed as Target)[ReactiveFlags.RAW] \u62FF\u5230\u7684\u662F\u8FD9\u4E2A\u4EE3\u7406\u5BF9\u8C61\u539F\u672C\u7684 target \u5BF9\u8C61\uFF0C\u5F53\u7136\u4E5F\u53EF\u80FD\u662F\u6CA1\u6709\n  const raw = observed && observed[ReactiveFlags.RAW];\n  // \u4E3A\u4EC0\u4E48\u8FD8\u8981\u8FDB\u884C toRaw \u5462\uFF1F\n  // \u4E3B\u8981\u7528\u6765\u5904\u7406 \uFF1Areadonly(reactive({}))\n  return raw ? toRaw(raw) : observed;\n}\n\n/**\n * \u521B\u5EFA\u54CD\u5E94\u5F0F\u5BF9\u8C61\n * @param target \u76EE\u6807\u5BF9\u8C61\n * @param isReadonly \u662F\u5426\u4E3A\u53EA\u8BFB\n * @param baseHandlers\n * @param collectionHandlers\n * @param proxyMap\n * @returns\n */\nfunction createReactiveObject(\n  target: Target,\n  isReadonly: boolean,\n  baseHandler: ProxyHandler<any>,\n  collectionHandler: ProxyHandler<any>,\n  proxyMap: WeakMap<Target, any>\n) {\n  if (!isObject(target)) {\n    console.warn('target must be a object');\n    return target;\n  }\n\n  /**\n   *  reactive \u5904\u7406\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF0C\u8FD4\u56DE\u7684\u4ECD\u65E7\u662F\u4E0A\u6B21\u7684\u4EE3\u7406\u540E\u7ED3\u679C\u5BF9\u8C61\uFF0C\u539F\u56E0\u662F\u56E0\u4E3A\u6709\u7F13\u5B58\u8BB0\u5F55\n      const obj1 = {};\n      const proxy7 = reactive(obj1);\n      const proxy8 = reactive(obj1);\n      console.log(proxy7 === proxy8); // true\n   */\n  // \u4EE3\u7406\u8FC7\u540E\u4F1A\u6709\u7F13\u5B58\u8BB0\u5F55\uFF0C\u5982\u679C\u4EE3\u7406\u5DF2\u7ECF\u5B58\u5728\u4E86\uFF0C\u5C31\u76F4\u63A5\u8FD4\u56DE\n  const existingProxy = proxyMap.get(target);\n  if (existingProxy) {\n    return existingProxy;\n  }\n\n  // \u5224\u65AD\u8FD9\u4E2A target \u5BF9\u8C61\u80FD\u5426\u88AB\u4EE3\u7406\n  const targetType = getTargetType(target);\n  if (targetType === TargetType.INVALID) {\n    return target;\n  }\n\n  // \u5F00\u59CB\u4EE3\u7406\n  const proxy = new Proxy(\n    target,\n    // \u4EE3\u7406\u4F7F\u7528\u7684 handler\n    // \u516C\u5171 COMMON \u7C7B\u578B\u4F7F\u7528 baseHandlers\uFF08\u5904\u7406 obj\u3001array\uFF09\n    // \u96C6\u5408 COLLECTION \u7C7B\u578B \u4F7F\u7528 collectionHandlers\uFF08\u5904\u7406 set\u3001map\uFF09\n    targetType === TargetType.COLLECTION ? collectionHandler : baseHandler\n  );\n  // \u8BBE\u7F6E\u7F13\u5B58\n  proxyMap.set(target, proxy);\n  // \u8FD4\u56DE\u4EE3\u7406\u5BF9\u8C61\n  return proxy;\n}\n\n/**\n * \u6807\u8BB0\u4E00\u4E2A\u5BF9\u8C61\uFF0C\u4F7F\u5F97\u8BE5\u5BF9\u8C61\u4E0D\u80FD\u88AB\u4EE3\u7406\n * @param value\n * @returns\n */\nexport function markRaw<T extends object>(\n  value: T\n): T & {\n  __v_skip?: boolean;\n} {\n  Object.defineProperty(value, ReactiveFlags.SKIP, {\n    configurable: true,\n    enumerable: false,\n    value\n  });\n  return value;\n}\n", "export const collectionHandler = {};\n\nexport const readonlyCollectionHandler = {};\n\nexport const shallowCollectionHandler = {};\n", "import {\n  hasOwn,\n  isArray,\n  isIntegerKey,\n  isObject,\n  isString\n} from '@meils/vue-shared';\nimport { ITERATE_KEY, track, trigger } from '../effect';\n\nimport {\n  reactive,\n  reactiveCacheMap,\n  readonly,\n  readonlyCacheMap,\n  shallowReactiveCacheMap,\n  shallowReadonlyCacheMap,\n  toRaw\n} from '../reactive';\nimport { ReactiveFlags, Target } from '../types/common';\nimport { TrackOpTypes, TriggerOpTypes } from '../types/operation';\n\nconst get = /*#__PURE__*/ createGetter();\nconst set = /*#__PURE__*/ createSetter();\nconst readonlyGet = /*#__PURE__*/ createGetter(\n  true /* isReadonly */,\n  false /* shallow */\n);\nconst shallowGet = /*#__PURE__*/ createGetter(\n  false /* isReadonly */,\n  true /* shallow */\n);\n\n/**\n * \u521B\u5EFA get \u4EE3\u7406\u65B9\u6CD5\n * @param isReadonly\n * @param shallow\n * @returns\n */\nfunction createGetter(isReadonly = false, shallow = false) {\n  return function get(target: Target, key: string | symbol, receiver: object) {\n    if (key === ReactiveFlags.IS_REACTIVE) {\n      // \u83B7\u53D6 ReactiveFlags.IS_REACTIVE \u5C5E\u6027\n      // \u5229\u7528\u7684\u539F\u7406\u662F\u95ED\u5305\u7279\u6027\n      return !isReadonly;\n    } else if (key === ReactiveFlags.IS_READONLY) {\n      return isReadonly;\n    } else if (key === ReactiveFlags.IS_SHALLOW) {\n      return shallow;\n    } else if (\n      key === ReactiveFlags.RAW &&\n      receiver ===\n        (isReadonly\n          ? shallow\n            ? shallowReadonlyCacheMap\n            : readonlyCacheMap\n          : shallow\n          ? shallowReactiveCacheMap\n          : reactiveCacheMap\n        ).get(target)\n    ) {\n      // const proxy = reactive(obj);\n      // \u53EF\u4F7F\u7528 proxy[ReactiveFlags.RAW] \u83B7\u53D6 proxy \u5BF9\u8C61\u7684\u539F\u59CB target \u5BF9\u8C61\n      // \u9650\u5236\u6761\u4EF6\u662F receiver \u5FC5\u987B\u662F proxy \u5BF9\u8C61\n      return target;\n    }\n\n    // TODO: \u6570\u7EC4\u7684 fix \u5904\u7406\n\n    // \u4F7F\u7528 Reflect \u53CD\u5C04\u53D6\u503C\n    const res = Reflect.get(target, key, receiver);\n\n    // \u67D0\u4E9B\u7279\u6B8A\u5C5E\u6027\u4E0D\u9700\u8981\u4F9D\u8D56\u8FFD\u8E2A\u5904\u7406\uFF08\u63D0\u5347\u6027\u80FD\uFF09\n    // TODO: \u6392\u9664 symbol \u7C7B\u578B\u7684 key\n    if (isString(key) && isNonTrackableKeys(key)) {\n      return res;\n    }\n\n    // \u975E\u53EA\u8BFB\u7684\u60C5\u51B5\u4E0B\u624D\u8FDB\u884C\u4F9D\u8D56\u6536\u96C6\n    if (!isReadonly) {\n      // \u4F9D\u8D56\u6536\u96C6\n      track(target, TrackOpTypes.GET, key);\n    }\n\n    // \u6D45\u5904\u7406\u76F4\u63A5\u8FD4\u56DE\uFF0C\u5C31\u4E0D\u8D70\u540E\u9762\u7684\u5BF9\u8C61\u9012\u5F52\u5904\u7406\u4E86\n    if (shallow) {\n      return res;\n    }\n\n    // \u5982\u679C\u53D6\u503C\u540E\u8FD4\u56DE\u503C\u662F\u5BF9\u8C61\uFF0C\u9012\u5F52\u5904\u7406\n    if (isObject(res)) {\n      return isReadonly ? readonly(res) : reactive(res);\n    }\n\n    return res;\n  };\n}\n\n/**\n * \u521B\u5EFA set \u4EE3\u7406\u51FD\u6570\n * @returns\n */\nfunction createSetter() {\n  return function set(\n    target: Target,\n    key: string | symbol,\n    value: unknown,\n    receiver: object\n  ) {\n    // \u53D6\u5230\u65E7\u7684\u503C\n    const oldValue = (target as any)[key];\n    const existingKey =\n      isArray(target) && isIntegerKey(key)\n        ? Number(key) < target.length\n        : hasOwn(target, key);\n\n    const res = Reflect.set(target, key, value, receiver);\n    if (target === toRaw(receiver)) {\n      if (!existingKey) {\n        // \u4E0D\u5B58\u5728\u5C5E\u6027\u503C\uFF0C\u5C5E\u4E8E\u65B0\u589E\u64CD\u4F5C\n        trigger(target, TriggerOpTypes.ADD, key);\n      } else if (!Object.is(value, oldValue)) {\n        // \u65B0\u65E7\u503C\u4E0D\u540C\uFF0C\u5C5E\u6027\u66F4\u65B0\u64CD\u4F5C\n        trigger(target, TriggerOpTypes.SET, key);\n      }\n    }\n    return res;\n  };\n}\n\n/**\n * \u62E6\u622A\u5220\u9664\u64CD\u4F5C\n * eg: delete obj.a \u4F1A\u89E6\u53D1\n * @param target\n * @param key\n * @returns\n */\nfunction deleteProperty(target: object, key: string | symbol): boolean {\n  const result = Reflect.deleteProperty(target, key);\n  if (result) {\n    // \u5220\u9664\u6210\u529F\uFF0C\u89E6\u53D1 trigger\n    trigger(target, TriggerOpTypes.DELETE, key);\n  }\n  return result;\n}\n\n/**\n * \u62E6\u622A has trap\n * eg: \"foo\" in observed \u4F1A\u89E6\u53D1 has\n * @param target\n * @param key\n */\nfunction has(target: object, key: string | symbol): boolean {\n  const result = Reflect.has(target, key);\n  // \u4F9D\u8D56\u6536\u96C6 track\n  track(target, TrackOpTypes.HAS, key);\n  return result;\n}\n\n/**\n * \u62E6\u622A ownKeys trap\n * eg: Object.keys(observed) \u4F1A\u89E6\u53D1 ownKeys\n * @param target\n * @param key\n */\nfunction ownKeys(target: object) {\n  const result = Reflect.ownKeys(target);\n  // ownKeys \u89E6\u53D1\u540E\uFF0C\u9700\u8981\u4F9D\u8D56\u6536\u96C6\n  // \u6570\u7EC4\u7684\u8BDD\uFF0C\u6536\u96C6\u5230 length \u5C5E\u6027\u4E2D\n  // \u5176\u4ED6\u7C7B\u578B\uFF0C\u5B58\u50A8\u5230 ITERATE_KEY \u5C5E\u6027\u4E2D\n\n  // Q: \u770B\u5230\u8FD9\u91CC\u5C31\u80FD\u7406\u89E3\u4E3A\u4EC0\u4E48\u8981\u6709 ITERATE_KEY \u4E86\uFF1F\n  // \u4E5F\u5C31\u662F\u8BF4\u5982\u679C\u89E6\u53D1\u4E86\u5BF9 key \u7684\u904D\u5386\uFF0C\u90A3\u4E48\u5C06\u4F9D\u8D56\u6536\u96C6\u5230 length \u6216 ITERATE_KEY \u5C5E\u6027\u4E0A\n  // \u4E4B\u540E\u5982\u679C\u5185\u5BB9\u6709\u589E\u51CF\uFF0C\u53EA\u9700\u8981\u627E length \u6216 ITERATE_KEY \u5C5E\u6027\u7684\u4F9D\u8D56 Dep \u5C31\u884C\n  track(target, TrackOpTypes.ITERATE, isArray(target) ? 'length' : ITERATE_KEY);\n  return result;\n}\n\n// TargetType.COMMON \u7C7B\u578B + reactive \u4F7F\u7528\u7684 handler\nexport const commonHandler = {\n  get, // \u62E6\u622A get trap\n  set, // \u62E6\u622A set trap\n  deleteProperty,\n  has,\n  ownKeys\n};\n\n// TargetType.COMMON \u7C7B\u578B + readonly \u4F7F\u7528\u7684 handler\nexport const readonlyCommonHandler = {\n  get: readonlyGet,\n  set(target: Target) {\n    if (__DEV__) {\n      console.warn('Failed to set : target is readonly', target);\n    }\n    return true;\n  },\n  deleteProperty(target: Target) {\n    if (__DEV__) {\n      console.warn('Failed to delete : target is readonly', target);\n    }\n    return true;\n  }\n  // Q: \u4E3A\u4EC0\u4E48\u4E0D\u9700\u8981 has \u548C ownKeys \u5462\uFF1F\n  // A: has \u548C ownKeys \u8DDF get \u7C7B\u4F3C\uFF0C\u9700\u8981\u6267\u884C track \u4F9D\u8D56\u6536\u96C6\u3002\u4F46\u662F\u56E0\u4E3A readonly \u662F\u4E0D\u4F1A\u4E8C\u6B21\u8FDB\u884C\u66F4\u65B0\u7684\uFF0C\u56E0\u6B64\u8FD9\u4E00\u6B65\u5C31\u6CA1\u5FC5\u8981\u4E86\u3002\n\n  // Q: \u4E3A\u4EC0\u4E48\u9700\u8981 get \u5462\uFF1F\n  // A: \u4E00\u4E9B\u7279\u6B8A\u5C5E\u6027\u503C\u7684\u8BBF\u95EE\uFF0C\u6BD4\u5982 ReactiveFlags.IS_REACTIVE \u4E5F\u662F\u9700\u8981\u652F\u6301\u7684\u3002\n};\n\nexport const shallowCommonHandler = Object.assign({}, commonHandler, {\n  get: shallowGet\n});\n\n/**\n * \u5224\u65AD key \u662F\u5426\u5728\u4E0D\u9700\u8981 track \u7684\u9ED1\u540D\u5355\n * @param key\n * @returns\n */\nfunction isNonTrackableKeys(key: string) {\n  return ['__proto__', '__v_isRef', '__isVue'].includes(key);\n}\n", "import { isArray, isIntegerKey } from '@meils/vue-shared';\nimport { createDep, Dep } from './dep';\nimport { Target } from './types/common';\nimport { TrackOpTypes, TriggerOpTypes } from './types/operation';\n\nexport let shouldTrack = true; // \u662F\u5426\u5E94\u8BE5\u8FFD\u8E2A\u4F9D\u8D56\uFF0C\u9ED8\u8BA4\u662F\u5F00\u542F\u7684\nconst trackStack: boolean[] = []; // \u6808\u7ED3\u6784\u5B58\u50A8 shouldTrack \u72B6\u6001\n\nexport let activeEffect: ReactiveEffect | undefined | null = null; // \u5F53\u524D\u6FC0\u6D3B\u7684\u526F\u4F5C\u7528\u5BF9\u8C61\n\nconst targetMap = new WeakMap<any, KeyToDepMap>();\n\nexport const ITERATE_KEY = Symbol('iterate');\n\ntype EffectScheduler = (...args: any[]) => any;\n\ntype KeyToDepMap = any;\n\ninterface ReactiveEffectRunner<T = any> {\n  (): T;\n  effect: ReactiveEffect;\n}\n\ninterface ReactiveEffectOptions {\n  lazy?: boolean;\n  scheduler?: EffectScheduler;\n}\n\n// ========================================== track start ==========================================\n\n/**\n * \u6682\u505C\u4F9D\u8D56\u8FFD\u8E2A\n */\nexport function pauseTracking() {\n  trackStack.push(shouldTrack);\n  shouldTrack = false;\n}\n\n/**\n * \u91CD\u7F6E\u4F9D\u8D56\u8FFD\u8E2A\u72B6\u6001\uFF08\u6216\u8005\u4E5F\u53EF\u4EE5\u7406\u89E3\u4E3A\u662F\u6062\u590D\u4E0A\u4E00\u4E2A\u8FFD\u8E2A\u72B6\u6001 shouldTrack\uFF09\n */\nexport function resetTracking() {\n  const last = trackStack.pop(); // \u53D6\u51FA\u4E0A\u6B21\u7684 shouldTrack \u503C\n  shouldTrack = last === undefined ? true : last;\n}\n\n/**\n * \u5F00\u542F\u5BF9 target[key] \u7684\u4F9D\u8D56\u8FFD\u8E2A(\u6536\u96C6)\n * @param target\n * @param type\n * @param key\n */\nexport function track(\n  target: object,\n  type: TrackOpTypes,\n  key: string | symbol\n): void {\n  // \u4F9D\u8D56\u8FFD\u8E2A\u7684\u6761\u4EF6\n  if (shouldTrack && activeEffect) {\n    // \u4ECE targetMap \u4E2D\u5C1D\u8BD5\u83B7\u53D6 target \u7684 depsMap\n    let depsMap = targetMap.get(target);\n    if (!depsMap) {\n      // \u672A\u83B7\u53D6\u5230\u4FBF\u521D\u59CB\u5316\n      // \u4E4B\u6240\u4EE5\u8FD8\u4F7F\u7528 Map\uFF0C\u662F\u56E0\u4E3A target \u5BF9\u8C61\u7684\u6BCF\u4E00\u4E2A\u5C5E\u6027\u90FD\u9700\u8981\u5B58\u50A8\u4F9D\u8D56\n      depsMap = new Map();\n      targetMap.set(target, depsMap);\n    }\n\n    // \u83B7\u53D6 target[key] \u7684\u4F9D\u8D56\n    let dep = depsMap.get(key);\n    if (!dep) {\n      // \u672A\u83B7\u53D6\u5230\u503C\uFF0C\u5219\u9700\u8981\u521B\u5EFA\u4E00\u4E2A Dep\uFF0C\u540C\u65F6\u8BBE\u7F6E\u5230 depsMap \u4E2D\n      dep = createDep([]);\n      depsMap.set(key, dep);\n    }\n\n    // \u6B63\u5F0F\u4F9D\u8D56\u6536\u96C6\n    // \u4F9D\u8D56\u6536\u96C6\u7684\u672C\u8D28\uFF1A\u89E6\u53D1\u5C5E\u6027\u7684 get \u540E\uFF0C\u5C06\u5BF9\u5E94\u7684 activeEffect \u6536\u96C6\u5230\u8BE5\u5C5E\u6027\u7684 dep \u4E2D\n    trackEffects(dep);\n  }\n}\n\n/**\n * \u4F9D\u8D56\u6536\u96C6\n * @param dep \u5C06 ActiveEffect \u6536\u96C6\u5230\u8BE5 dep \u96C6\u4E2D\n */\nexport function trackEffects(dep: Dep): void {\n  // TODO: \u4F9D\u8D56\u6536\u96C6\u6DF1\u5EA6\u5904\u7406\n  if (shouldTrack && dep) {\n    // \u4F9D\u8D56\u6536\u96C6\u65F6\u5019\uFF0C\u4E92\u76F8\u8BB0\u5F55\u5173\u7CFB\n    // \u65B9\u4FBF\u540E\u7EED\u7684\u4F9D\u8D56\u6E05\u9664\u4F18\u5316\n    dep.add(activeEffect!);\n    activeEffect!.deps.push(dep);\n  }\n}\n\n// ========================================== track end ==========================================\n\n// ========================================== trigger start =======================================\n\n/**\n * \u89E6\u53D1\u66F4\u65B0\n * @param target\n * @param type \u89E6\u53D1\u7684\u64CD\u4F5C\u7C7B\u578B ADD | DELETE | SET\n * @param key\n * @param newValue\n * @param oldValue\n * @returns\n */\nexport function trigger(target: object, type: TriggerOpTypes, key?: unknown) {\n  const depsMap = targetMap.get(target);\n\n  if (!depsMap) {\n    return;\n  }\n\n  // \u9996\u5148\u58F0\u660E\u4E00\u4E2A deps \u6570\u7EC4\uFF0C\u6536\u96C6\u9700\u8981\u901A\u77E5\u7684\u6240\u6709\u4F9D\u8D56\n  const deps: (Dep | undefined)[] = []; //\n  if (isArray(target) && key === 'length') {\n    // \u6570\u7EC4\u5904\u7406\n  }\n\n  if (key !== void 0) {\n    deps.push(depsMap.get(key));\n  }\n\n  // \u9488\u5BF9\u4E0D\u540C\u7684\u64CD\u4F5C\u7C7B\u578B\uFF0C\u505A\u4E00\u4E9B\u8865\u5145\u903B\u8F91\u5904\u7406\n  switch (type) {\n    case TriggerOpTypes.ADD:\n      if (isArray(target) && isIntegerKey(key)) {\n        // \u6570\u7EC4\u4E2D\u65B0\u589E\u5C5E\u6027\n        // \u6DFB\u52A0 length \u5C5E\u6027\u7684\u4F9D\u8D56\n        deps.push(depsMap.get('length'));\n      } else {\n        deps.push(depsMap.get(ITERATE_KEY));\n      }\n      break;\n    case TriggerOpTypes.DELETE:\n      if (!isArray(target)) {\n        deps.push(depsMap.get(ITERATE_KEY));\n      }\n      break;\n    case TriggerOpTypes.SET:\n      break;\n  }\n\n  const effects: ReactiveEffect[] = [];\n  for (const dep of deps) {\n    if (dep) {\n      effects.push(...dep);\n    }\n  }\n\n  // \u6B63\u5F0F\u89E6\u53D1\u4F9D\u8D56\u7684\u66F4\u65B0\n  triggerEffects(createDep(effects));\n}\n\nexport function triggerEffects(dep: Dep) {\n  for (const effect of dep) {\n    if (effect.computed) {\n      triggerEffect(effect);\n    }\n  }\n  for (const effect of dep) {\n    if (!effect.computed) {\n      triggerEffect(effect);\n    }\n  }\n}\n\nexport function triggerEffect(effect: ReactiveEffect) {\n  if (effect.scheduler) {\n    effect.scheduler();\n  } else {\n    effect.run();\n  }\n}\n\n// ========================================== trigger end =======================================\n\n// ========================================== ReactiveEffect start =======================================\n\n/**\n * \u54CD\u5E94\u5F0F\u526F\u4F5C\u7528\u5BF9\u8C61\n * \u5728Vue3\u4E2D\u8FD9\u5C31\u662F\u8981\u6536\u96C6\u7684\u4F9D\u8D56\u5BF9\u8C61\n */\nexport class ReactiveEffect<T = any> {\n  active = true; // \u6682\u65F6\u7559\u7740\n  deps = [] as Dep[]; // \u5C5E\u6027\u8BBF\u95EE\u8981\u6536\u96C6\u4F9D\u8D56\uFF08\u5C06 ReactiveEffect \u6536\u96C6\u5230 dep\u4E2D\uFF09\uFF0C\u4F9D\u8D56\u540C\u6837\u4E5F\u8981\u8BB0\u5F55\u5B83\u88AB\u54EA\u4E9B dep \u6536\u96C6\u4E86\n  parent: ReactiveEffect | undefined | null = null; // \u4E0A\u4E00\u4E2A ReactiveEffect \u7684\u5B9E\u4F8B\n\n  computed = false; // \u8BA1\u7B97\u5C5E\u6027\u65F6\u4F7F\u7528\n\n  constructor(\n    public fn: () => T, // \u89E6\u53D1 get \u7684\u51FD\u6570\n    public scheduler: EffectScheduler | null = null // \u8C03\u5EA6\u6267\u884C\u51FD\u6570\n  ) {}\n\n  /**\n   * \u91CD\u70B9\uFF1A\u8BBE\u7F6E activeEffect = this -> \u6267\u884C fn \u51FD\u6570\n   * @returns\n   */\n  run() {\n    if (!this.active) {\n      return this.fn();\n    }\n    // \u7F13\u5B58 \u4E0A\u4E00\u6B21\u7684 shouldTrack \u503C\n    const lastShouldTrack = shouldTrack;\n    try {\n      this.parent = activeEffect;\n      activeEffect = this as ReactiveEffect;\n      shouldTrack = true;\n\n      // TODO: \u5D4C\u5957\u5C42\u7EA7\u63A7\u5236\n\n      return this.fn();\n    } catch (e) {\n      // \u4F7F\u7528\u4E0A\u9762\u7684\u7F13\u5B58 \u6062\u590D\u72B6\u6001\n      activeEffect = this.parent;\n      shouldTrack = lastShouldTrack;\n      this.parent = undefined;\n    }\n  }\n}\n\n// ========================================== ReactiveEffect end =========================================\n\n/**\n * \u5F53\u524D\u6B63\u5728\u4F9D\u8D56\u6536\u96C6\u4E2D\n * @returns\n */\nexport function isTracking() {\n  return shouldTrack && activeEffect !== undefined;\n}\n\n/**\n * effect \u63A5\u6536\u4E00\u4E2A\u51FD\u6570\uFF0C\u5C06\u5176\u5904\u7406\u6210\u54CD\u5E94\u5F0F\u526F\u4F5C\u7528\u51FD\u6570\n * @param getter\n * @param options \u53EF\u9009\u7684\u53C2\u6570\n * @returns\n */\nexport function effect<T = any>(\n  getter: () => T,\n  options?: ReactiveEffectOptions\n) {\n  const _effect = new ReactiveEffect(getter);\n\n  // \u5C06\u4F20\u9012\u7684\u9009\u9879\uFF0C\u5408\u5E76\u5230 _effect \u5BF9\u8C61\u91CC\n  if (options) {\n    Object.assign(_effect, options);\n  }\n\n  // \u4E0D\u4F20\u9012 options \u6216 \u8BBE\u7F6Eoptions.lazy\u4E3Afalse \u7684\u60C5\u51B5\u4E0B\uFF0C\u7ACB\u5373\u6267\u884C run\n  if (!options || !options.lazy) {\n    _effect.run();\n  }\n\n  // \u628A _effect.run \u8FD9\u4E2A\u65B9\u6CD5\u8FD4\u56DE\n  // \u53EF\u5916\u90E8\u6267\u884C\n  const runner = _effect.run.bind(_effect) as ReactiveEffectRunner;\n  runner.effect = _effect;\n  return runner;\n}\n\nexport type {\n  EffectScheduler,\n  KeyToDepMap,\n  ReactiveEffectRunner,\n  ReactiveEffectOptions\n};\n", "import { ReactiveEffect } from './effect';\n\ntype Dep = Set<ReactiveEffect>;\n\n// \u7528\u4E8E\u5B58\u50A8\u6240\u6709\u7684 effect \u5BF9\u8C61\n\n/**\n * \u521B\u5EFA Dep \u5BF9\u8C61\uFF0C\u5B58\u50A8\u6240\u6709\u4F9D\u8D56\n * \u4F9D\u8D56\u5C31\u662F ReactiveEffect\n * @param effects\n * @returns Set \u96C6\u5408\n */\nexport function createDep(effects: ReactiveEffect[] = []): Dep {\n  const dep = new Set<ReactiveEffect>(effects || []);\n  return dep;\n}\n\nexport type { Dep };\n", "// \u8FFD\u8E2A\u64CD\u4F5C\u7684\u7C7B\u578B\nexport const enum TrackOpTypes {\n  GET = 'get',\n  HAS = 'has',\n  ITERATE = 'iterate'\n}\n\n// \u89E6\u53D1\u64CD\u4F5C\u7684\u7C7B\u578B\nexport const enum TriggerOpTypes {\n  SET = 'set',\n  ADD = 'add',\n  DELETE = 'delete',\n  CLEAR = 'clear'\n}\n", "// Reactive \u7684\u7279\u6B8A\u6807\u5FD7\u5C5E\u6027\nexport const enum ReactiveFlags {\n  SKIP = '__v_skip',\n  IS_REACTIVE = '__v_isReactive',\n  IS_READONLY = '__v_isReadonly',\n  IS_SHALLOW = '__v_isShallow',\n  RAW = '__v_raw'\n}\n\nexport interface Target {\n  [ReactiveFlags.SKIP]?: boolean; // \u8868\u793A\u8DF3\u8FC7\uFF0C\u4E0D\u9700\u8981\u4EE3\u7406\n  [ReactiveFlags.IS_REACTIVE]?: boolean; // !isReadonly === true \u5904\u7406\u540E\u4F1A\u6807\u8BB0\u8FD9\u4E2A\u5C5E\u6027\n  [ReactiveFlags.IS_READONLY]?: boolean; // isReadonly === true \u5904\u7406\u540E\u4F1A\u6807\u8BB0\u8FD9\u4E2A\u5C5E\u6027\n  [ReactiveFlags.IS_SHALLOW]?: boolean; // \u6D45\u5904\u7406\uFF0C\u4F1A\u6807\u8BB0\u8FD9\u4E2A\u5C5E\u6027\n  [ReactiveFlags.RAW]?: any;\n}\n\nexport const enum TargetType {\n  INVALID = 0, // \u65E0\u6548\u7C7B\u578B\n  COMMON = 1, // \u57FA\u7840\u7C7B\u578B\n  COLLECTION = 2 // \u96C6\u5408\u7C7B\u578B\n}\n", "import { isObject, toRawTypeString } from '@meils/vue-shared';\nimport { reactive } from '../reactive';\n\nimport { ReactiveFlags, Target, TargetType } from '../types/common';\n\n/**\n * \u83B7\u53D6\u5982\u4E0B\u7684\u7C7B\u578B\u5BF9\u5E94\u7684 TargetType\n * @param rawType Object | Array | Map | Set | WeakMap | WeakSet\n * @returns\n */\nexport function targetTypeMap(rawType: string) {\n  switch (rawType) {\n    case 'Object':\n    case 'Array':\n      return TargetType.COMMON;\n    case 'Map':\n    case 'Set':\n    case 'WeakMap':\n    case 'WeakSet':\n      return TargetType.COLLECTION;\n    default:\n      return TargetType.INVALID;\n  }\n}\n\n/**\n * \u83B7\u53D6\u5BF9\u8C61 target \u7684\u7C7B\u578B\n * @param value\n * @returns INVALID \u65E0\u6548 \uFF5C COMMON \uFF5C COLLECTION\n */\nexport function getTargetType(value: Target) {\n  // \u65E0\u6548\u7684\u6761\u4EF6\uFF1A\u5E26\u6709 __v_skip \u5C5E\u6027 || \u5BF9\u8C61\u4E0D\u53EF\u88AB\u6269\u5C55\n  // 1. __v_skip \u8868\u793A\u4E0D\u53EF\u88AB\u4EE3\u7406\uFF0C\u9700\u8981\u8DF3\u8FC7\n  // 2. !Object.isExtensible(value) \u5BF9\u8C61\u4E0D\u53EF\u88AB\u6269\u5C55\n  return value[ReactiveFlags.SKIP] || !Object.isExtensible(value)\n    ? TargetType.INVALID\n    : targetTypeMap(toRawTypeString(value));\n}\n\nexport function toReactive<T = unknown>(value: T): T {\n  return isObject(value) ? reactive(value) : value;\n}\n", "import { isArray } from '@meils/vue-shared';\nimport { createDep, Dep } from './dep';\nimport {\n  activeEffect,\n  shouldTrack,\n  trackEffects,\n  triggerEffects\n} from './effect';\nimport { toRaw } from './reactive';\nimport { toReactive } from './utils';\n\nexport interface Ref<T = any> {\n  value: T;\n  dep?: Dep;\n}\n\nexport function ref(value: unknown) {\n  return createRef(value);\n}\n\nexport function shallowRef(value: unknown) {\n  return createRef(value, true /* shallow */);\n}\n\nexport function createRef(value: unknown, shallow = false) {\n  // \u5DF2\u7ECF\u88AB ref \u5904\u7406\u8FC7\u4E86\uFF0C\u5C31\u4E0D\u9700\u8981\u4E8C\u6B21\u5904\u7406\u4E86\n  if (isRef(value)) {\n    return value;\n  }\n\n  // \u672C\u8D28\u662F\u8FD4\u56DE\u4E00\u4E2A RefImpl \u5B9E\u4F8B\u5BF9\u8C61\n  return new RefImpl(value, shallow);\n}\n\n/**\n * \u8F85\u52A9 Ref \u7684\u4EE3\u7406\u5BF9\u8C61\n */\nclass RefImpl<T = unknown> {\n  public dep?: Dep = createDep([]); // \u6536\u96C6\u5230\u7684\u4F9D\u8D56\u653E\u7F6E\u5728 dep \u4E2D\n\n  private _value: T; // \u79C1\u6709\u53D8\u91CF\uFF0C\u4FDD\u5B58\u5185\u90E8\u771F\u5B9E\u7684\u503C\n  private _rawValue: T; // \u539F\u59CB\u503C\n\n  private shallow = false;\n\n  public readonly __v_isRef = true; // \u7279\u6B8A\u5C5E\u6027\uFF0C\u6807\u5FD7\u8BE5\u5BF9\u8C61\u4E3A Ref \u5BF9\u8C61\n\n  constructor(value: T, shallow = false) {\n    this._rawValue = shallow ? value : toRaw(value); // \u8BB0\u5F55\u539F\u59CB\u503C\n    // \u5982\u679C value \u662F reactive \u5904\u7406\u8FC7\u540E\u7684\uFF0C\u5219\u901A\u8FC7 toRaw \u53D6\u539F\u59CB\u5BF9\u8C61\n    // eg: ref(reactive(obj)) ==> ref(obj)\n\n    this._value = shallow ? value : toReactive(value); // \u5982\u679C\u662F\u5BF9\u8C61\uFF0C\u9700\u8981\u4F7F\u7528 reactive \u5904\u7406\n    // NOTE: shallow \u5F00\u542F\u540E\uFF0C\u4E3B\u8981\u9488\u5BF9 value \u7C7B\u578B\u4E3A object \u7684\u60C5\u51B5\n    // \u6B64\u65F6\u4E0D\u4F1A\u5BF9 value \u505A reactive \u5904\u7406\n\n    this.shallow = shallow;\n  }\n\n  get value() {\n    // \u89E6\u53D1\u4F9D\u8D56\u8FFD\u8E2A\u6536\u96C6\n    trackRefValue(this);\n    return this._value;\n  }\n\n  set value(newVal) {\n    if (!Object.is(this._rawValue, newVal)) {\n      this._value = this.shallow ? newVal : toReactive(newVal);\n      this._rawValue = newVal;\n      // \u89E6\u53D1\u4F9D\u8D56\n      triggerRefValue(this);\n    }\n  }\n}\n\n/**\n * \u8FFD\u8E2A\u6536\u96C6 Ref \u7684\u4F9D\u8D56\n * @param ref\n */\nexport function trackRefValue(ref: Ref) {\n  if (shouldTrack && activeEffect) {\n    trackEffects(ref.dep!);\n  }\n}\n\n/**\n * \u89E6\u53D1 Ref \u7684\u4F9D\u8D56\u66F4\u65B0\n * @param ref\n */\nexport function triggerRefValue(ref: Ref) {\n  triggerEffects(ref.dep!);\n}\n\n/**\n * \u5224\u65AD\u4E00\u4E2A\u5BF9\u8C61\u65F6\u90FD\u4E3A Ref \u5BF9\u8C61\n * @param value\n * @returns\n */\nexport function isRef(value: unknown): value is Ref {\n  return !!(value && (value as RefImpl).__v_isRef);\n}\n\n// triggerRef \u53EF\u4EE5\u8DDF shallowRef \u642D\u914D\u4F7F\u7528\nexport function triggerRef(ref: Ref): void {\n  triggerRefValue(ref);\n}\n\n// Eg:\n// const shallow = shallowRef({\n//   greet: 'Hello, world'\n// })\n\n// \u8FD9\u4E0D\u4F1A\u89E6\u53D1\u4F5C\u7528 (effect)\uFF0C\u56E0\u4E3A ref \u662F\u6D45\u5C42\u7684\n// \u53EA\u6709\u5BF9 .value \u91CD\u65B0\u8D4B\u503C\u624D\u4F1A\u662F\u54CD\u5E94\u5F0F\u7684\n// shallow.value.greet = 'Hello, universe'\n\n// \u6B64\u65F6\u53EF\u4EE5\u624B\u52A8\u89E6\u53D1\n// triggerRef(shallow)\n\n/**\n * \u63A5\u51FA ref \u7684\u503C\n * @param val\n * @returns\n */\nexport function unRef<T>(val: T | Ref<T>): T {\n  return isRef(val) ? val.value : val;\n}\n\n/**\n * \u4E3A\u4E00\u4E2A reactive \u5BF9\u8C61\u7684\u67D0\u4E2A\u5C5E\u6027\u521B\u5EFA\u4E00\u4E2A ref\n * @param observed\n * @param key\n * @param defaultValue\n * @returns\n */\nexport function toRef<T extends object, K extends keyof T>(\n  observed: T,\n  key: K,\n  defaultValue?: T[K]\n): any {\n  const val = observed[key];\n  // \u53D6\u503C\u53D1\u73B0\u5DF2\u7ECF\u662F Ref\uFF0C\u5C31\u6CA1\u5FC5\u8981\u518D\u7EE7\u7EED\u5904\u7406\u4E86\n  if (isRef(val)) {\n    return val;\n  }\n  return new ObjectRefImpl<T, K>(observed, key, defaultValue);\n}\n\n// const fooRef = toRef(state, 'foo')\n// fooRef.value++  ===> \u8FD9\u91CC\u5B9E\u8D28\u662F state.foo++\n// \u672C\u8D28\uFF1Aref.value ===> \u6307\u5411 observed[key]\nexport class ObjectRefImpl<T extends object, K extends keyof T> {\n  public readonly __v_isRef = true; // \u7279\u6B8A\u5C5E\u6027\uFF0C\u6807\u5FD7\u8BE5\u5BF9\u8C61\u4E3A Ref \u5BF9\u8C61\n  constructor(\n    private readonly _object: T,\n    private readonly _key: K,\n    private readonly _defaultValue?: T[K]\n  ) {}\n\n  get value() {\n    const currVal = this._object[this._key];\n    return !currVal ? this._defaultValue : currVal;\n  }\n\n  set value(newVal) {\n    this._object[this._key] = newVal!;\n  }\n}\n\nexport function toRefs<T extends object>(object: T) {\n  const ret: any = isArray(object) ? new Array(object.length) : {};\n  for (const key in object) {\n    ret[key] = toRef(object, key);\n  }\n  return ret;\n}\n", "import { NOOP } from '@meils/vue-shared';\nimport { createDep, Dep } from './dep';\nimport { ReactiveEffect } from './effect';\nimport { Ref, trackRefValue, triggerRefValue } from './ref';\n\nexport type ComputedGetter<T> = (...args: any[]) => T;\nexport type ComputedSetter<T> = (v: T) => void;\n\nexport interface WritableComputedOptions<T> {\n  get: ComputedGetter<T>;\n  set: ComputedSetter<T>;\n}\n\nexport interface ComputedRef<T = any> extends Ref<T> {\n  readonly value: T;\n}\n\nexport function computed<T>(getter: ComputedGetter<T>): ComputedRef<T>;\nexport function computed<T>(\n  options: WritableComputedOptions<T>\n): ComputedRef<T>;\nexport function computed<T>(\n  getterOrOptions: ComputedGetter<T> | WritableComputedOptions<T>\n) {\n  let getter: ComputedGetter<T>;\n  let setter: ComputedSetter<T>;\n  if (typeof getterOrOptions === 'function') {\n    getter = getterOrOptions;\n    setter = NOOP;\n  } else {\n    // \u81EA\u5B9A\u4E49 get\u3001set\n    getter = getterOrOptions.get;\n    setter = getterOrOptions.set;\n  }\n\n  // \u8FD4\u56DE\u4E00\u4E2A ComputedRefImpl \u5B9E\u4F8B\u5BF9\u8C61\n  const obj = new ComputedRefImpl(getter, setter) as any;\n  return obj;\n}\n\nclass ComputedRefImpl<T = any> {\n  public dep?: Dep = createDep([]); // \u6BCF\u4E00\u4E2A computed \u90FD\u6709\u81EA\u5DF1\u7684 dep\uFF0C\u7528\u6765\u6536\u96C6\u4F9D\u8D56\n\n  private _value!: T; // \u8BB0\u5F55 computed \u7684\u8BA1\u7B97\u503C\n\n  public readonly __v_isRef = true; // \u6807\u8BB0\u4E5F\u662F Ref \u7C7B\u578B\n\n  public _dirty = true; // \u810F\u6807\u8BB0\uFF0C\u9ED8\u8BA4\u662F true\uFF0C\u90A3\u4E48\u7B2C\u4E00\u6B21\u8BBF\u95EE\u80AF\u5B9A\u9700\u8981\u6267\u884C\u8BA1\u7B97\n\n  public readonly effect: ReactiveEffect<T>;\n\n  constructor(\n    getter: ComputedGetter<T>,\n    private readonly _setter: ComputedSetter<T>\n  ) {\n    // \u5B9E\u4F8B\u5316\u4E00\u4E2A\u54CD\u5E94\u5F0F\u526F\u4F5C\u7528\u5BF9\u8C61\n    // \u7528\u6765\u5B9E\u73B0\uFF1A\u5F53 computed getter \u4F9D\u8D56\u7684\u67D0\u4E9B\u54CD\u5E94\u5F0F\u6570\u636E\u53D1\u751F\u53D8\u5316\u7684\u65F6\u5019\uFF0C\u89E6\u53D1\u8BA1\u7B97\u503C\u7684\u91CD\u65B0\u8BA1\u7B97\u6267\u884C\n    this.effect = new ReactiveEffect(getter, () => {\n      if (!this._dirty) {\n        this._dirty = true;\n        // computed \u8BA1\u7B97\u503C\u66F4\u65B0\n        // \u56E0\u4E3A computed \u4E5F\u5C5E\u4E8E\u54CD\u5E94\u5F0F\u503C\uFF0C\u56E0\u6B64\u4E5F\u9700\u8981 trigger \u89E6\u53D1\u4F9D\u8D56\u66F4\u65B0\n        triggerRefValue(this);\n      }\n    });\n\n    // \u6807\u5FD7\u8BE5 effect \u662F computed \u7C7B\u578B\n    this.effect.computed = true;\n    this.effect.active = true;\n  }\n\n  get value() {\n    // \u6536\u96C6\u4F9D\u8D56\n    trackRefValue(this);\n    if (this._dirty) {\n      // \u5982\u679C\u5DF2\u7ECF\u810F\u4E86\uFF0C\u9700\u8981\u91CD\u65B0\u8BA1\u7B97\n      this._dirty = false;\n      this._value = this.effect.run()!;\n    }\n    return this._value;\n  }\n\n  set value(newValue: T) {\n    this._setter(newValue);\n  }\n}\n"],
  "mappings": "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",
  "names": ["isObject", "isArray", "isIntegerKey", "TrackOpTypes", "TriggerOpTypes", "effect", "ReactiveFlags", "isReadonly", "get", "set", "isArray", "isIntegerKey", "isObject", "isObject", "isReadonly", "collectionHandler", "isObject", "isArray", "ref", "isArray"]
}
